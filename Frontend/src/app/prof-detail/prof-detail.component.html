
<div class="container mt-4">
  <h2>Détails du Professeur</h2>

  <div class="mb-4" *ngIf="prof?.user">
    <h3>Nom : {{ prof?.user?.firstname }}</h3>
    <h3>Prénom : {{ prof?.user?.lastname }}</h3>
    <p><strong>Email :</strong> {{ prof?.user?.email }}</p>
    <p><strong>CIN :</strong> {{ prof?.cin }}</p>
  </div>

  <h3>Modules Associés :</h3>

  <table class="table table-bordered" *ngIf="modules && modules.length > 0">
    <thead>
      <tr>
        <th>Nom du Module</th>
        <th>Nombre d'Heures</th>
        <th>Semestre</th>
        <th>Nombre d'Élèves</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let module of modules">
        <td>{{ module.moduleName }}</td>
        <td>{{ module.nombreHeures }}</td>
        <td>{{ module.semestre || 'Non défini' }}</td>
        <td>{{ module.studentIds.length }}</td> <!-- Correction -->
        <td>
          <button class="btn btn-danger btn-sm" (click)="removeModule(module.id)">Retirer le Module</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="modules && modules.length === 0">
    Aucun module associé à ce professeur.
  </div>
<!--
  <pre>{{ prof | json }}</pre>
  <pre>{{ modules | json }}</pre> -->
  <div class="mt-4">
    <button class="btn btn-primary" (click)="toggleModuleForm()">Ajouter un Module</button>
  </div>

  <!-- Formulaire d'ajout de module -->
  <div *ngIf="showModuleForm" class="mt-3">
    <h3>Ajouter un Module</h3>
    <form (ngSubmit)="onSubmitModule()">
      <div class="form-group">
        <label for="moduleName">Nom du Module</label>
        <input type="text" id="moduleName" class="form-control" [(ngModel)]="newModule.moduleName" name="moduleName" required>
      </div>

      <div class="form-group">
        <label for="nombreHeures">Nombre d'Heures</label>
        <input type="number" id="nombreHeures" class="form-control" [(ngModel)]="newModule.nombreHeures" name="nombreHeures" required>
      </div>

      <div class="form-group">
        <label for="semestre">Semestre</label>
        <select id="semestre" class="form-control" [(ngModel)]="newModule.semestre" name="semestre" required>
          <option value="API11">API11</option>
          <option value="API12">API12</option>
          <option value="API21">API21</option>
          <option value="API22">API22</option>
          <option value="CI11">CI11</option>
          <option value="CI12">CI12</option>
          <option value="CI21">CI21</option> 
          <option value="CI22">CI22</option>
          <option value="CI31">CI31</option>
          <option value="CI32">CI32</option>
        </select>
      </div>

      <button type="submit" class="btn btn-success mt-2">Créer Module</button>
    </form>
  </div>

</div>

